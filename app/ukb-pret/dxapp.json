{
  "name": "ukb-pret",
  "title": "UK Biobank PRS Release Evaluation Tool",
  "summary": "An app for generating metrics and a PDF report evaluating and comparing an input PRS to a PRS provided in the UK Biobank PRS Release",
  "dxapi": "1.0.0",
  "inputSpec": [
     {
      "name": "ukb_release_prs_file",
      "label": "Data from the UKB PRS Release incl. PRS (generated by table-exporter)",
      "class": "file",
      "optional": false,
      "patterns": [
        "*.csv"
      ],
      "help": "CSV file generated by the table-exporter app containing PRS from the UKB PRS Release, genetic principal component data and sex (see the app README for details). Headers should be [eid,p<dataset_id>,p31,p26201_a0,p26201_a1,p26201_a2,p26201_a3], where <dataset_id> is the field used to identify the phenotype used to generate the PRS."
     },
    {
      "name": "user_prs",
      "label": "PRS provided by user",
      "class": "file",
      "optional": false,
      "patterns": [
        "*.csv"
      ],
      "help": "CSV file containing a PRS to be evaluated against a PRS from the UKB PRS Release. Headers should be [eid,<data_tag>], where <data_tag> is the field used to identify the PRS in the output"
    },
    {
      "name": "pheno_file",
      "label": "Phenotype file provided by the user",
      "class": "file",
      "optional": false,
      "patterns": [
        "*.csv"
      ],
      "help": "CSV file defining a trait phenotype. Headers should contain at least [eid,pheno], but can optionally contain all [age_at_first_assessment,date_of_diagnosis,date_of_first_assessment,date_of_death,incident] headers for detailed binary trait analysis"
    },
    {
      "name": "ukb_pret_docker",
      "label": "ukb-pret installation in a docker image",
      "class": "file",
      "optional": false,
      "patterns": [
        "*.tar.gz"
      ],
      "help": "A .tar.gz file containing an installation of the ukb-pret tool (source code at https://github.com/Genomicsplc/ukb-pret)"
    }
  ],
  "outputSpec": [
    {
      "name": "pdf_report",
      "label": "PDF report comparing the user PRS to a PRS from the UKB PRS Release",
      "class": "file",
      "patterns": [
        "*.pdf"
      ],
      "help": "PDF report containing plots and metrics comparing PRSs provided by the user and the UKB PRS Release"
    },
    {
      "name": "csv_output",
      "label": "CSV of evaluation metrics",
      "class": "file",
      "patterns": [
        "*.csv"
      ],
      "help": "CSV file containing evaluation metrics for the user's PRS and the UKB PRS Release PRS"
    }
  ],
  "runSpec": {
    "timeoutPolicy": {
      "*": {
        "hours": 48
      }
    },
    "interpreter": "bash",
    "file": "src/ukb-pret.sh",
    "distribution": "Ubuntu",
    "release": "20.04",
    "version": "0"
  },
  "authorizedUsers": [
    "PUBLIC"
  ],
  "regionalOptions": {
    "aws:eu-west-2": {
      "systemRequirements": {
        "*": {
          "instanceType": "mem1_ssd1_v2_x4"
        }
      }
    }
  }
}
